var TcHmi;!function(t){!function(e){!function(s){!function(i){class o extends i.HeatingCircuit{constructor(t,s,i){super(t,s,i),this.__defaultBaTemplateDescription=o.BaTemplateDescription,this.__frostThermostatLegendHandler=new e.Components.LegendIconHandler(e.Icons.convertIIconDataToIIconAttributes(e.Icons.HVAC.Temperature_s))}__previnit(){super.__previnit(),this.__main?.setIcon(e.Icons.HVAC.Heater.path),this.__legendIconHandler.icon=e.Icons.convertIIconDataToIIconAttributes(e.Icons.HVAC.Heater),this.__frostThermostat=t.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.SensorBinary",this.__id+"-frost-thermostat",null,this),null!=this.__frostThermostat&&(this.__frostThermostat.setDisplayMode(s.System.Sensor.DisplayMode.temperature).setPinPosition(e.Position.bottom).setPinConnection(40).setPinWidth(4).setShowDisplays(!1).getElement().addClass("frost-thermostat"),this.__destroyersToCallOnDestroy.push(this.__frostThermostat.eventHandler.register("onAttached",(()=>{this.__determineVisibilityFrostThermostat()}))),this.__element.append(this.__frostThermostat.getElement())),this.__tFrost=t.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.SensorAnalog",this.__id+"-t-frost",null,this),null!=this.__tFrost&&(this.__tFrost.setDisplayMode(s.System.Sensor.DisplayMode.temperature).setPinPosition(e.Position.bottom).setPinConnection(40).setPinWidth(4).setDisplayPositionDesigner(e.Components.UiIcon.DisplayPosition.top).setShowSetpoint(!1).getElement().addClass("t-frost"),this.__destroyersToCallOnDestroy.push(this.__tFrost.eventHandler.register("onAttached",(()=>{this.__determineVisibilityTFrost()}))),this.__element.append(this.__tFrost.getElement())),this.__flowTempSensor&&this.__flowTempSensor.setShowSetpoint(!1)}__init(){super.__init()}__attach(){super.__attach(),null!=this.__frostThermostat&&this.__frostThermostatLegendHandler.show()}__detach(){super.__detach(),this.__frostThermostatLegendHandler.hide()}destroy(){this.__keepAlive||(this.__frostThermostat?.destroy(),this.__tFrost?.destroy(),super.destroy())}onResized(){if(!this.__isAttached)return;super.onResized();let t=this.__element.children(".connection.return").position().left,e=this.__element.children(".connection.return").width();if(this.__returnTempSensor){let s=this.__returnTempSensor.getElement().position().left;this.__returnTempSensor.setPinConnection(s-(t+e))}}__determineVisibilityFrostThermostat(){if(null==this.baObjectHandler.baObject)return;if(!this.baObjectHandler.baObject.checkTemplate(o.BaTemplateDefinition,this.baTemplateHandler.baBaTemplateDescription,this,!0))return;if(null==this.__frostThermostat)return;let t=this.baObjectHandler.baObject.getTemplateChild("frostThermostat");t instanceof e.BA.BaView?(this.__frostThermostat.setBaObject(t),this.__frostThermostat.getIsAttached()||(this.__element.append(this.__frostThermostat.getElement()),this.__frostThermostatLegendHandler.show())):(this.__frostThermostat.setBaObject(null),this.__frostThermostat.getIsAttached()&&(this.__frostThermostat.getElement().detach(),this.__frostThermostatLegendHandler.hide()))}__determineVisibilityTFrost(){if(null==this.baObjectHandler.baObject)return;if(!this.baObjectHandler.baObject.checkTemplate(o.BaTemplateDefinition,this.baTemplateHandler.baBaTemplateDescription,this,!0))return;if(null==this.__tFrost)return;let t=this.baObjectHandler.baObject.getTemplateChild("tFrost");t instanceof e.BA.BaView?(this.__tFrost.setBaObject(t),this.__tFrost.getIsAttached()||this.__element.append(this.__tFrost.getElement())):(this.__tFrost.setBaObject(null),this.__tFrost.getIsAttached()&&this.__tFrost.getElement().detach())}setSetpointSensorFrost(t){return this.__tFrost?.setSetpointDesigner(t),this}setShowFeedbackSensorFrost(t){return this.__tFrost?.setShowFeedback(t),this}getShowFeedbackSensorFrost(){return this.__tFrost?.getShowFeedback()}setShowSetpointSensorFrost(t){return this.__tFrost?.setShowSetpoint(t),this}getShowSetpointSensorFrost(){return this.__tFrost?.getShowSetpoint()}processBaObject(){super.processBaObject(),this.__frostThermostat?.setBaObject(null),this.__tFrost?.setBaObject(null),null!=this.baObjectHandler.baObject&&this.getIsAttached()&&(this.__determineVisibilityFrostThermostat(),this.__determineVisibilityTFrost())}__processShowTags(){super.__processShowTags(),this.__attrHandler.showTags?(this.__frostThermostat?.setShowTag(e.Components.UiIcon.DisplayPosition.top),this.__tFrost?.setShowTag(e.Components.UiIcon.DisplayPosition.top)):(this.__frostThermostat?.setShowTag(null),this.__tFrost?.setShowTag(null))}}i.PreHeater=o,function(t){t.BaTemplateDefinition={...i.HeatingCircuit.BaTemplateDefinition,tempFlowSp:{optional:!0},frostThermostat:{optional:!0},tFrost:{optional:!0}},t.BaTemplateDescription={...i.HeatingCircuit.BaTemplateDescription,tempFlowSp:{identifier:""},frostThermostat:{identifier:"FrostThermostat"},tFrost:{identifier:"TFrost"}}}(o=i.PreHeater||(i.PreHeater={}))}(s.Plants||(s.Plants={}))}(e.Controls||(e.Controls={}))}(t.BuildingAutomation||(t.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("PreHeater","TcHmi.BuildingAutomation.Controls.Plants",TcHmi.BuildingAutomation.Controls.Plants.PreHeater);