"use strict";var TcHmi,__runInitializers=this&&this.__runInitializers||function(thisArg,initializers,value){for(var useValue=arguments.length>2,i=0;i<initializers.length;i++)value=useValue?initializers[i].call(thisArg,value):initializers[i].call(thisArg);return useValue?value:void 0},__esDecorate=this&&this.__esDecorate||function(ctor,descriptorIn,decorators,contextIn,initializers,extraInitializers){function accept(f){if(void 0!==f&&"function"!=typeof f)throw new TypeError("Function expected");return f}for(var _,kind=contextIn.kind,key="getter"===kind?"get":"setter"===kind?"set":"value",target=!descriptorIn&&ctor?contextIn.static?ctor:ctor.prototype:null,descriptor=descriptorIn||(target?Object.getOwnPropertyDescriptor(target,contextIn.name):{}),done=!1,i=decorators.length-1;i>=0;i--){var context={};for(var p in contextIn)context[p]="access"===p?{}:contextIn[p];for(var p in contextIn.access)context.access[p]=contextIn.access[p];context.addInitializer=function(f){if(done)throw new TypeError("Cannot add initializers after decoration has completed");extraInitializers.push(accept(f||null))};var result=(0,decorators[i])("accessor"===kind?{get:descriptor.get,set:descriptor.set}:descriptor[key],context);if("accessor"===kind){if(void 0===result)continue;if(null===result||"object"!=typeof result)throw new TypeError("Object expected");(_=accept(result.get))&&(descriptor.get=_),(_=accept(result.set))&&(descriptor.set=_),(_=accept(result.init))&&initializers.unshift(_)}else(_=accept(result))&&("field"===kind?initializers.unshift(_):descriptor[key]=_)}target&&Object.defineProperty(target,contextIn.name,descriptor),done=!0};!function(TcHmi){!function(Controls){!function(Beckhoff){!function(Industries){!function(Common){let TcHmiSevenSegmentDisplay=(()=>{let ___onResized_decorators,___onResolverForActiveSegmentColorWatchCallback_decorators,___onResolverForInactiveSegmentColorWatchCallback_decorators,___onValueSymbolWatch_decorators,_classSuper=TcHmi.Controls.System.TcHmiControl,_instanceExtraInitializers=[];return class TcHmiSevenSegmentDisplay extends _classSuper{static{const _metadata="function"==typeof Symbol&&Symbol.metadata?Object.create(_classSuper[Symbol.metadata]??null):void 0;___onResized_decorators=[TcHmi.EventHandler()],___onResolverForActiveSegmentColorWatchCallback_decorators=[TcHmi.CallbackMethod],___onResolverForInactiveSegmentColorWatchCallback_decorators=[TcHmi.CallbackMethod],___onValueSymbolWatch_decorators=[TcHmi.CallbackMethod],__esDecorate(this,null,___onResized_decorators,{kind:"method",name:"__onResized",static:!1,private:!1,access:{has:obj=>"__onResized"in obj,get:obj=>obj.__onResized},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResolverForActiveSegmentColorWatchCallback_decorators,{kind:"method",name:"__onResolverForActiveSegmentColorWatchCallback",static:!1,private:!1,access:{has:obj=>"__onResolverForActiveSegmentColorWatchCallback"in obj,get:obj=>obj.__onResolverForActiveSegmentColorWatchCallback},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onResolverForInactiveSegmentColorWatchCallback_decorators,{kind:"method",name:"__onResolverForInactiveSegmentColorWatchCallback",static:!1,private:!1,access:{has:obj=>"__onResolverForInactiveSegmentColorWatchCallback"in obj,get:obj=>obj.__onResolverForInactiveSegmentColorWatchCallback},metadata:_metadata},null,_instanceExtraInitializers),__esDecorate(this,null,___onValueSymbolWatch_decorators,{kind:"method",name:"__onValueSymbolWatch",static:!1,private:!1,access:{has:obj=>"__onValueSymbolWatch"in obj,get:obj=>obj.__onValueSymbolWatch},metadata:_metadata},null,_instanceExtraInitializers),_metadata&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_metadata})}static#tchmiFQN="TcHmi.Controls.Beckhoff.Industries.Common."+this.name;constructor(element,pcElement,attrs){super(element,pcElement,attrs)}__elementTemplateRoot=__runInitializers(this,_instanceExtraInitializers);__activeSegmentColor;__inactiveSegmentColor;__value;__valueSymbol;__valueIsValid=!1;__digits;__decimalDigits;__decimalPrecisionMode;__SegmentElements=[];__elementInvalidNotification;__updateInvalidNotificationInterval=0;__destroyValueSymbolWatch=null;__previnit(){if(this.__elementTemplateRoot=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_Industries_Common_TcHmiSevenSegmentDisplay-template")[0],!this.__elementTemplateRoot)throw new Error("Invalid Template.html");this.__elementInvalidNotification=document.createElement("div"),this.__elementInvalidNotification.classList.add("TcHmi_Controls_Beckhoff_Industries_Common_TcHmiSevenSegmentDisplay-invalid-notification"),super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__destroyOnDetach.push(TcHmi.EventProvider.register(this.__id+".onResized",this.__onResized)),this.__valueSymbol&&!this.__destroyValueSymbolWatch&&(this.__destroyValueSymbolWatch=this.__valueSymbol.watch(this.__onValueSymbolWatch)),this.__updateInvalidNotificationInterval=setInterval((()=>this.__updateInvalidNotification()),500),this.__processActiveSegmentColor(),this.__processInactiveSegmentColor()}__detach(){super.__detach(),this.__updateInvalidNotificationInterval&&(clearInterval(this.__updateInvalidNotificationInterval),this.__updateInvalidNotificationInterval=0),this.__elementInvalidNotification.isConnected&&TcHmi.TopMostLayer.remove(this,this.__elementInvalidNotification),this.__destroyValueSymbolWatch&&(this.__destroyValueSymbolWatch(),this.__destroyValueSymbolWatch=null)}destroy(){this.__keepAlive||(this.__destroyValueSymbolWatch&&(this.__destroyValueSymbolWatch(),this.__destroyValueSymbolWatch=null),this.__valueSymbol&&this.__valueSymbol.destroy(),super.destroy())}__onResized(){this.__updateInvalidNotification()}__updateInvalidNotification(){if(this.__isAttached)if(this.__valueIsValid)this.__elementInvalidNotification.isConnected&&TcHmi.TopMostLayer.remove(this,this.__elementInvalidNotification);else{let boundingRect=this.__element[0].getBoundingClientRect(),top=(boundingRect.top||0)-15,left=(boundingRect.left||0)+(boundingRect.width||0)-15;[document.elementsFromPoint(left,top+16),document.elementsFromPoint(left+14,top+29)].every((elementStack=>{const controlIndex=elementStack.indexOf(this.__element[0]);if(-1===controlIndex)return!1;if(0===controlIndex)return!0;for(let i=controlIndex-1;i>=0;i--)if(elementStack[i].closest("#"+this.getId())){if(0===i)return!0}else if(elementStack[i].closest("#tchmi-system-topmostlayer-master"))return!0;return!1}))?(this.__elementInvalidNotification.style.left=left+"px",this.__elementInvalidNotification.style.top=top+"px",TcHmi.TopMostLayer.add(this,this.__elementInvalidNotification,{closeOnBackground:!1,dimBackground:!1,modal:!1,justAbove:{reference:this.__element[0],conflictResolution:TcHmi.TopMostLayer.ConflictResolution.Down}})):this.__elementInvalidNotification.isConnected&&TcHmi.TopMostLayer.remove(this,this.__elementInvalidNotification)}}setActiveSegmentColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ActiveSegmentColor"));let resolverInfo=this.__objectResolvers.get("activeSegmentColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,{parentControl:this,type:this.getAttributeDescription("ActiveSegmentColor")?.type});this.__objectResolvers.set("activeSegmentColor",{resolver,watchCallback:this.__onResolverForActiveSegmentColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForActiveSegmentColorWatchCallback)})}__onResolverForActiveSegmentColorWatchCallback(data){!this.__isAttached&&data.destroy&&data.destroy(),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__activeSegmentColor)||(this.__activeSegmentColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActiveSegmentColor"}),this.__processActiveSegmentColor()):TcHmi.Log.Controls.error(this,TcHmiSevenSegmentDisplay.#tchmiFQN,{Attribute:"ActiveSegmentColor"},`Resolving symbols from object failed with error: ${TcHmi.Log.buildMessage(data.details)}`)}getActiveSegmentColor(){return this.__activeSegmentColor}__processActiveSegmentColor(){if(!this.__isAttached)return;const segments=this.__elementTemplateRoot.getElementsByTagName("tchmi-seven-segment");for(const segment of segments)segment.style.setProperty("--tchmi-color",this.__activeSegmentColor?this.__activeSegmentColor.color:"")}setInactiveSegmentColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("InactiveSegmentColor"));let resolverInfo=this.__objectResolvers.get("inactiveSegmentColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,{parentControl:this,type:this.getAttributeDescription("InactiveSegmentColor")?.type});this.__objectResolvers.set("inactiveSegmentColor",{resolver,watchCallback:this.__onResolverForInactiveSegmentColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForInactiveSegmentColorWatchCallback)})}__onResolverForInactiveSegmentColorWatchCallback(data){!this.__isAttached&&data.destroy&&data.destroy(),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__inactiveSegmentColor)||(this.__inactiveSegmentColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"InactiveSegmentColor"}),this.__processInactiveSegmentColor()):TcHmi.Log.Controls.error(this,TcHmiSevenSegmentDisplay.#tchmiFQN,{Attribute:"InactiveSegmentColor"},`Resolving symbols from object failed with error: ${TcHmi.Log.buildMessage(data.details)}`)}getInactiveSegmentColor(){return this.__inactiveSegmentColor}__processInactiveSegmentColor(){if(!this.__isAttached)return;const segments=this.__elementTemplateRoot.getElementsByTagName("tchmi-seven-segment");for(const segment of segments)segment.style.setProperty("--tchmi-color-inactive",this.__inactiveSegmentColor?this.__inactiveSegmentColor.color:"")}setValueSymbol(valueNew){let newSymbol=valueNew;if(null===newSymbol){let symbolExpression=this.getAttributeDefaultValueInternal("ValueSymbol");symbolExpression&&(newSymbol=new TcHmi.Symbol(symbolExpression))}if(this.__valueSymbol!==newSymbol){if(this.__destroyValueSymbolWatch&&(this.__destroyValueSymbolWatch(),this.__destroyValueSymbolWatch=null),this.__valueSymbol&&this.__valueSymbol.destroy(),newSymbol instanceof TcHmi.Symbol)if(this.__valueSymbol=newSymbol,this.__isAttached)this.__destroyValueSymbolWatch=this.__valueSymbol.watch(this.__onValueSymbolWatch);else{let referenceDelegation=this.__valueSymbol.getReferenceDelegation();referenceDelegation&&(referenceDelegation.preload=done=>{this.__valueSymbol?.readEx2({forceParallel:!0,forceReadWriteGroup:"TCHMI_BINDING_PRELOAD"},(data=>{this.__processValueSymbolResult(data),done()}))})}else void 0===this.__valueSymbol?this.__valueSymbol=null:(this.__valueSymbol=null,this.__setValue(null));TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ValueSymbol"})}}getValueSymbol(){return this.__valueSymbol}__onValueSymbolWatch(data){this.__processValueSymbolResult(data)}__processValueSymbolResult(data){data.error===TcHmi.Errors.NONE?void 0!==data.value?this.__setValue(data.value):this.__setValue(null):data.details&&TcHmi.Log.Controls.error(this,TcHmiSevenSegmentDisplay.#tchmiFQN,{Attribute:"ValueSymbol",Symbol:this.__valueSymbol?.getExpression().toString()},TcHmi.Log.buildMessage(data.details))}__setValue(valueNew){valueNew!==this.__value&&(this.__value=valueNew,this.__processValue())}__processValue(){let stringValue="",valid=!0;if(void 0!==this.__value&&null!==this.__value){let decimalDigits=this.__decimalDigits??0;if("Round"===this.__decimalPrecisionMode)stringValue=this.__value.toFixed(decimalDigits);else{const factor=Math.pow(10,decimalDigits);stringValue=(Math.trunc(this.__value*factor)/factor).toFixed(decimalDigits)}this.__digits&&(stringValue.indexOf(".")>this.__digits||!stringValue.includes(".")&&stringValue.length>this.__digits?(stringValue=this.__decimalDigits?".".padStart((this.__digits??1)+1,"-").padEnd((this.__digits??1)+1+this.__decimalDigits,"-"):"".padStart(this.__digits??1,"-"),valid=!1):stringValue=stringValue.padStart((this.__digits??1)+(this.__decimalDigits?1:0)+(this.__decimalDigits??0)," "))}else stringValue=this.__decimalDigits?".".padStart(this.__digits??1,"-").padEnd((this.__digits??1)+1+this.__decimalDigits,"-"):"".padStart(this.__digits??1,"-"),valid=!0;this.__valueIsValid=valid,this.__updateInvalidNotification();let valueArray=stringValue.split("");for(let i=0;i<valueArray.length;i++)switch(this.__SegmentElements[i]||(this.__SegmentElements[i]=document.createElement("tchmi-seven-segment"),this.__elementTemplateRoot.append(this.__SegmentElements[i])),valueArray[i]){case"0":this.__SegmentElements[i].setValue(0);break;case"1":this.__SegmentElements[i].setValue(1);break;case"2":this.__SegmentElements[i].setValue(2);break;case"3":this.__SegmentElements[i].setValue(3);break;case"4":this.__SegmentElements[i].setValue(4);break;case"5":this.__SegmentElements[i].setValue(5);break;case"6":this.__SegmentElements[i].setValue(6);break;case"7":this.__SegmentElements[i].setValue(7);break;case"8":this.__SegmentElements[i].setValue(8);break;case"9":this.__SegmentElements[i].setValue(9);break;case"-":this.__SegmentElements[i].setValue("-");break;case".":this.__SegmentElements[i].setValue(".");break;default:this.__SegmentElements[i].setValue(null)}if(valueArray.length<this.__SegmentElements.length){for(let i=this.__SegmentElements.length-1;i>valueArray.length-1;i--)this.__SegmentElements[i].remove();this.__SegmentElements.splice(valueArray.length,this.__SegmentElements.length-valueArray.length)}}setDigits(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Digits")),convertedValue!==this.__digits&&(this.__digits=convertedValue,this.__digits&&this.__digits<0&&(this.__digits=0),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Digits"}),this.__processValue())}getDigits(){return this.__digits}setDecimalDigits(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("DecimalDigits")),convertedValue!==this.__decimalDigits&&(this.__decimalDigits=convertedValue,this.__decimalDigits&&this.__decimalDigits<0&&(this.__decimalDigits=0),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"DecimalDigits"}),this.__processValue())}getDecimalDigits(){return this.__decimalDigits}setDecimalPrecisionMode(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);if(null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("DecimalPrecisionMode")),convertedValue!==this.__decimalPrecisionMode){if("Round"===convertedValue)this.__decimalPrecisionMode=convertedValue;else this.__decimalPrecisionMode="Truncate";TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"DecimalPrecisionMode"}),this.__processDecimalPrecisionMode()}}getDecimalPrecisionMode(){return this.__decimalPrecisionMode}__processDecimalPrecisionMode(){this.__processValue()}}})();Common.TcHmiSevenSegmentDisplay=TcHmiSevenSegmentDisplay}(Industries.Common||(Industries.Common={}))}(Beckhoff.Industries||(Beckhoff.Industries={}))}(Controls.Beckhoff||(Controls.Beckhoff={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiSevenSegmentDisplay","TcHmi.Controls.Beckhoff.Industries.Common",TcHmi.Controls.Beckhoff.Industries.Common.TcHmiSevenSegmentDisplay);